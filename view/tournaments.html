{% extends "view/rootpage.html" %}
{% block title %}Tournament List{% endblock %}

{% block head_extra %}
<script>
	function DeleteTournament(t)
	{
		// Disable the button
		$('#' + t + ' .tournament_row button').prop('disabled', true)
		
		// Call the deletion URL
		$.get("delete_tournament?t="  + t, function(data, status) {
			$('#' + t).remove();
		});
	}
</script>
{% endblock %}

{% block content %}
	<div class="panel panel-primary">
		<div class="panel-heading">Your Tournaments</div>
		<table class="table table-striped">
		{% for t in tournaments %}
			<tr id="{{t.key.id()}}">
				<div class="tournament_row">
					<td>
						<a href="/tournament_instance?t_key={{t.key.id()}}">{{t.name}}</a>
					</td>
					<td>
					<div class="btn-group">
				  		<button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
				    		Delete <span class="caret"></span>
				  		</button>
				  		<ul class="dropdown-menu" role="menu">
				    		<li>There's no going back...</li>
				    		<li class="divider"></li>
				    		<li><a href="#" onclick="DeleteTournament({{t.key.id()}})">Permanently Delete Tournament</a></li>
				  		</ul>
					</div>
					</td>
				</div>
			</tr>
		{% endfor %}
		</table>
	</div>
	<hr />
	
	<ul>
		<li><a href="/new_tournament">Make a new tournament</a></li>
	</ul>
{% endblock %}